<?xml version="1.0" encoding="utf-8" ?>
<templates id="doc_dashboard" xml:space="preserve">
    <t t-name="DoctorDashboard" owl="1">
        <div class="doc-glass-bg" t-ref="root">
            <!-- Animated gradient orbs -->
            <div class="doc-orb doc-orb-1"></div>
            <div class="doc-orb doc-orb-2"></div>
            <div class="doc-orb doc-orb-3"></div>

            <div class="doc-layout">
                <!-- Glass Sidebar -->
                <aside class="doc-sidebar">
                    <div class="doc-sidebar-top">
                        <div class="doc-logo">
                            <div class="doc-logo-icon">
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                                </svg>
                            </div>
                            <div class="doc-logo-info">
                                <span class="doc-logo-name">MedConnect</span>
                                <span class="doc-logo-role">Espace Médecin</span>
                            </div>
                        </div>

                        <div class="doc-doctor-card">
                            <div class="doc-avatar" t-out="state.doctorInitials"/>
                            <div class="doc-doctor-info">
                                <span class="doc-doctor-name">Dr. <t t-out="state.doctorName"/></span>
                                <span class="doc-doctor-date"><t t-out="state.currentDate"/></span>
                            </div>
                        </div>
                    </div>

                    <nav class="doc-nav">
                        <span class="doc-nav-label">NAVIGATION</span>
                        <ul class="doc-nav-menu">
                            <li>
                                <a href="#" class="doc-nav-link"
                                   t-att-class="{ 'active': state.activeSection === 'consultation' }"
                                   t-on-click="fetch_consultation">
                                    <span class="doc-nav-icon">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                                    </span>
                                    <span class="doc-nav-text">Consultations</span>
                                    <span class="doc-nav-badge"><t t-out="state.consultationsCount"/></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="doc-nav-link"
                                   t-att-class="{ 'active': state.activeSection === 'patient' }"
                                   t-on-click="list_patient_data">
                                    <span class="doc-nav-icon">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                                    </span>
                                    <span class="doc-nav-text">Patients</span>
                                    <span class="doc-nav-badge"><t t-out="state.patientsWaitingCount"/></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="doc-nav-link"
                                   t-att-class="{ 'active': state.activeSection === 'inpatient' }"
                                   t-on-click="action_list_inpatient">
                                    <span class="doc-nav-icon">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                                    </span>
                                    <span class="doc-nav-text">Hospitalisés</span>
                                    <span class="doc-nav-badge"><t t-out="state.alertsCount"/></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="doc-nav-link"
                                   t-att-class="{ 'active': state.activeSection === 'surgery' }"
                                   t-on-click="fetch_doctors_schedule">
                                    <span class="doc-nav-icon">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                                    </span>
                                    <span class="doc-nav-text">Chirurgies</span>
                                    <span class="doc-nav-badge"><t t-out="state.surgeriesCount"/></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="doc-nav-link"
                                   t-att-class="{ 'active': state.activeSection === 'shift' }"
                                   t-on-click="fetch_allocation_lines">
                                    <span class="doc-nav-icon">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                    </span>
                                    <span class="doc-nav-text">Planning</span>
                                </a>
                            </li>
                        </ul>
                    </nav>

                    <div class="doc-sidebar-footer">
                        <div class="doc-notif-card">
                            <div class="doc-notif-icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                            </div>
                            <div class="doc-notif-info">
                                <span class="doc-notif-count"><t t-out="state.notificationCount"/> alertes</span>
                                <span class="doc-notif-text">en attente</span>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Main Content -->
                <main class="doc-main">
                    <!-- Stats Grid -->
                    <div class="doc-stats-grid">
                        <div class="doc-stat-card doc-stat-violet">
                            <div class="doc-stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                            </div>
                            <div class="doc-stat-info">
                                <span class="doc-stat-value"><t t-out="state.consultationsCount"/></span>
                                <span class="doc-stat-label">Consultations</span>
                                <span class="doc-stat-sub"><t t-out="state.consultationsSubtitle"/></span>
                            </div>
                        </div>

                        <div class="doc-stat-card doc-stat-cyan">
                            <div class="doc-stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
                            </div>
                            <div class="doc-stat-info">
                                <span class="doc-stat-value"><t t-out="state.patientsWaitingCount"/></span>
                                <span class="doc-stat-label">En attente</span>
                                <span class="doc-stat-sub"><t t-out="state.patientsSubtitle"/></span>
                            </div>
                        </div>

                        <div class="doc-stat-card doc-stat-rose">
                            <div class="doc-stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                            </div>
                            <div class="doc-stat-info">
                                <span class="doc-stat-value"><t t-out="state.surgeriesCount"/></span>
                                <span class="doc-stat-label">Chirurgies</span>
                                <span class="doc-stat-sub"><t t-out="state.surgeriesSubtitle"/></span>
                            </div>
                        </div>

                        <div class="doc-stat-card doc-stat-amber">
                            <div class="doc-stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                            </div>
                            <div class="doc-stat-info">
                                <span class="doc-stat-value"><t t-out="state.alertsCount"/></span>
                                <span class="doc-stat-label">Alertes</span>
                                <span class="doc-stat-sub"><t t-out="state.alertsSubtitle"/></span>
                            </div>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="doc-charts-grid">
                        <div class="doc-glass-card">
                            <h3 class="doc-card-title">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
                                Évolution des consultations
                            </h3>
                            <div class="doc-chart-container">
                                <canvas id="consultationsChart" t-ref="consultationsChart"></canvas>
                            </div>
                        </div>

                        <div class="doc-glass-card">
                            <h3 class="doc-card-title">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>
                                Répartition des statuts
                            </h3>
                            <div class="doc-chart-container">
                                <canvas id="pathologiesChart" t-ref="pathologiesChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Grid -->
                    <div class="doc-bottom-grid">
                        <div class="doc-glass-card">
                            <h3 class="doc-card-title">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Prochains rendez-vous
                            </h3>
                            <div class="doc-appointments-list">
                                <t t-foreach="state.appointments" t-as="appointment" t-key="appointment_index">
                                    <div class="doc-appt-row">
                                        <div class="doc-appt-time"><t t-out="appointment.time"/></div>
                                        <div class="doc-appt-bar" t-att-class="{ 'urgent': appointment.urgent }"/>
                                        <div class="doc-appt-details">
                                            <span class="doc-appt-name"><t t-out="appointment.patient_name"/></span>
                                            <span class="doc-appt-type"><t t-out="appointment.type"/></span>
                                        </div>
                                    </div>
                                </t>
                                <div t-if="!state.appointments.length" class="doc-empty">
                                    Aucun rendez-vous aujourd'hui
                                </div>
                            </div>
                        </div>

                        <div class="doc-glass-card">
                            <h3 class="doc-card-title">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                                Prochaines chirurgies
                            </h3>
                            <div class="doc-appointments-list">
                                <t t-foreach="state.surgeries" t-as="surgery" t-key="surgery_index">
                                    <div class="doc-appt-row">
                                        <div class="doc-appt-time"><t t-out="surgery.date"/></div>
                                        <div class="doc-appt-details">
                                            <span class="doc-appt-name"><t t-out="surgery.patient_name"/></span>
                                            <span class="doc-appt-type"><t t-out="surgery.name"/></span>
                                        </div>
                                        <span class="doc-surgery-status"><t t-out="surgery.state"/></span>
                                    </div>
                                </t>
                                <div t-if="!state.surgeries.length" class="doc-empty">
                                    Aucune chirurgie planifiée
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </t>
</templates>
